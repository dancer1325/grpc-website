---
title: Generated-code reference
linkTitle: Generated code
weight: 95
spelling: cSpell:ignore buildscript classpath grpcexample motd srcs xolstice
---

## Packages
* Java class generated / service defined in a '.proto' file
  * className == 'serviceName + `Grpc`
  * packageName == `java_package` option / specified in '.proto' file
    * if `java_package` is NOT specified (ðŸ‘ï¸NOT recommended ðŸ‘ï¸) -> packageName == `package` / specified in '.proto' file  
  * _Example:_

    ```protobuf
    package grpcexample;
    
    option java_package = "io.grpc.examples";
    ```

    -> generated class will be `io.grpc.examples.ServiceNameGrpc`


## Service Stub
* := inner abstract class | generated Java code / suffixed with `ImplBase` -- _Example:_ `ServiceNameImplBase` --
  * 1 Java method / method in the service definition
    * it's signatures -- vary depending on -- type of RPCs   
    * up to the service implementer to
      * extend this class
      * implement the functionality of these methods
    * if you do NOT override -> methods return an error to the client


### Unary
* service stub signature

    ```java
    public void unaryExample(
        RequestType request,
        StreamObserver<ResponseType> responseObserver)
    ```

### Server-streaming
* service stub signature
  * == unary service stub signature

      ```java
      public void serverStreamingExample(
          RequestType request,
          StreamObserver<ResponseType> responseObserver)
      ```

### Client-streaming
* service stub signature

    ```java
    public StreamObserver<RequestType> clientStreamingExample(
        StreamObserver<ResponseType> responseObserver)
    ```

### Bidirectional-streaming
* service stub signature
  * == client-streaming service stub signature

      ```java
      public StreamObserver<RequestType> bidirectionalStreamingExample(
          StreamObserver<ResponseType> responseObserver)
      ```

## Client Stubs
* := stubs / wrap a `Channel` -- supplied by -- the user of the generated code
  * channel -- is used to send -- RPCs to the service
  * types of stubs / generated by Java
    * asynchronous -- has a related class --`ServiceNameStub` 
    * blocking -- has a related class --`ServiceNameBlockingStub`
    * future -- has a related class --`ServiceNameFutureStub`
* uses
  * by gRPC clients -- to call -- methods / defined by the service

### Asynchronous Stub
* := stub /
  * RPCs / made via an asynchronous stub -- operate entirely through -- callbacks on `StreamObserver` 
  * 1 Java method / method from the service definition
  * `ServiceNameGrpc.newStub(Channel channel)`
    * way to instantiate an asynchronous stub

#### Unary
* == asynchronous stub signature / unary RPC method `unaryExample`:

    ```java
    public void unaryExample(
        RequestType request,
        StreamObserver<ResponseType> responseObserver)
    ```

#### Server-streaming
* == asynchronous stub signature / server-streaming RPC method
`serverStreamingExample`:

    ```java
    public void serverStreamingExample(
        RequestType request,
        StreamObserver<ResponseType> responseObserver)
    ```

#### Client-streaming
* == asynchronous stub signature / client-streaming RPC method
`clientStreamingExample`:

    ```java
    public StreamObserver<RequestType> clientStreamingExample(
        StreamObserver<ResponseType> responseObserver)
    ```

#### Bidirectional-streaming
* == asynchronous stub signature / bidirectional-streaming RPC method
`bidirectionalStreamingExample`:

    ```java
    public StreamObserver<RequestType> bidirectionalStreamingExample(
        StreamObserver<ResponseType> responseObserver)
    ```

### Blocking Stub
* := stub /
  * RPCs / made via a blocking stub 
  * 1 Java method / unary and server-streaming method from the service definition
    * == NOT support client-streaming or bidirectional-streaming RPCs
  * `ServiceNameGrpc.newBlockingStub(Channel channel)`
    * way to instantiate a blocking stub

#### Unary
* == blocking stub signature / unary RPC method `unaryExample`:

    ```java
    public ResponseType unaryExample(RequestType request)
    ```

#### Server-streaming
* == blocking stub signature / server-streaming RPC method `serverStreamingExample`:

    ```java
    public Iterator<ResponseType> serverStreamingExample(RequestType request)
    ```

### Future Stub
* := stub /
  * RPCs / made via a future stub
    * == `GrpcFuture<ResponseType>` / implements the `com.google.common.util.concurrent.ListenableFuture` interface
  * 1 Java method / unary method in the service definition
    * == NOT support streaming calls
  * `ServiceNameGrpc.newFutureStub(Channel channel)`
    * way to instantiate a future stub

#### Unary
* == future stub signature / unary RPC method `unaryExample`:

    ```java
    public ListenableFuture<ResponseType> unaryExample(RequestType request)
    ```

## Codegen / protobuf-based codegen 
* structure
  * `.proto` files placed in 
    * `src/main/proto`
    * `src/test/proto`
* [protobuf-maven-plugin][]

    ```xml
    <build>
      <extensions>
        <extension>
          <groupId>kr.motd.maven</groupId>
          <artifactId>os-maven-plugin</artifactId>
          <version>1.4.1.Final</version>
        </extension>
      </extensions>
      <plugins>
        <plugin>
          <groupId>org.xolstice.maven.plugins</groupId>
          <artifactId>protobuf-maven-plugin</artifactId>
          <version>0.5.0</version>
          <configuration>
            <protocArtifact>com.google.protobuf:protoc:3.3.0:exe:${os.detected.classifier}</protocArtifact>
            <pluginId>grpc-java</pluginId>
            <pluginArtifact>io.grpc:protoc-gen-grpc-java:1.4.0:exe:${os.detected.classifier}</pluginArtifact>
          </configuration>
          <executions>
            <execution>
              <goals>
                <goal>compile</goal>
                <goal>compile-custom</goal>
              </goals>
            </execution>
          </executions>
        </plugin>
      </plugins>
    </build>
    ```
  * Eclipse and NetBeans users -> check `os-maven-plugin`'s
[IDE documentation](https://github.com/trustin/os-maven-plugin#issues-with-eclipse-m2e-or-other-ides).

[protobuf-maven-plugin]: https://www.xolstice.org/protobuf-maven-plugin/
* [protobuf-gradle-plugin][]

    ```gradle
    apply plugin: 'java'
    apply plugin: 'com.google.protobuf'
    
    buildscript {
      repositories {
        mavenCentral()
      }
      dependencies {
        // ASSUMES GRADLE 2.12 OR HIGHER. Use plugin version 0.7.5 with earlier
        // gradle versions
        classpath 'com.google.protobuf:protobuf-gradle-plugin:0.8.0'
      }
    }
    
    protobuf {
      protoc {
        artifact = "com.google.protobuf:protoc:3.2.0"
      }
      plugins {
        grpc {
          artifact = 'io.grpc:protoc-gen-grpc-java:1.4.0'
        }
      }
      generateProtoTasks {
        all()*.plugins {
          grpc {}
        }
      }
    }
    ```

[protobuf-gradle-plugin]: https://github.com/google/protobuf-gradle-plugin

* via Bazel [`java_grpc_library`](https://github.com/grpc/grpc-java/blob/master/java_grpc_library.bzl)

    ```java
    load("@grpc_java//:java_grpc_library.bzl", "java_grpc_library")
    
    proto_library(
        name = "helloworld_proto",
        srcs = ["src/main/proto/helloworld.proto"],
    )
    
    java_proto_library(
        name = "helloworld_java_proto",
        deps = [":helloworld_proto"],
    )
    
    java_grpc_library(
        name = "helloworld_java_grpc",
        srcs = [":helloworld_proto"],
        deps = [":helloworld_java_proto"],
    )
    ```

* for Android developers, check [Generating client code](/docs/platforms/android/java/basics/#generating-client-code)
* how to invoke the protobuf plugin for gRPC Java directly ? 

    ```sh
    $ protoc --plugin=protoc-gen-grpc-java \
        --grpc-java_out="$OUTPUT_FILE" --proto_path="$DIR_OF_PROTO_FILE" "$PROTO_FILE"
    ```
